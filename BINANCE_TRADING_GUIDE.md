# 币安自动交易系统 - 完整使用指南

## 功能概述

本系统是基于15分钟趋势过滤 + 5分钟回调进场策略的加密货币日内交易系统，集成了币安期货交易功能。

## 核心功能

### 1. 账户管理
- 安全连接币安API
- 实时查看账户余额
- 查看当前持仓和盈亏
- 查看交易订单记录

### 2. 交易配置
- 手动配置交易参数
- 策略参数调整
- 风险管理设置

### 3. 实时监控
- WebSocket实时行情
- 实时交易信号检测
- 自动交易执行
- 交易记录追踪

### 4. 策略回测
- 历史数据回测
- 策略性能评估
- 参数优化

---

## 快速开始

### 准备工作

#### 1. 注册币安账号
- 访问 [币安官网](https://www.binance.com/)
- 完成实名认证
- 充值USDT到钱包

#### 2. 创建API密钥
- 登录币安 → API管理
- 创建新的API Key
- **重要**：只启用"期货交易"权限
- **不要**开启提币权限
- 设置IP白名单（推荐）

#### 3. 获取测试网账户（首次使用）
- 访问 [币安期货测试网](https://testnet.binancefuture.com/)
- 注册测试账号
- 获取测试USDT

---

## 详细使用教程

### 第一步：配置API

1. **进入"自动交易"标签页**
2. **填写API信息**
   - API Key：从币安API管理页面复制
   - API Secret：从币安API管理页面复制
3. **选择环境**
   - ✓ 测试网：首次使用必须选择
   - ☐ 主网：充分测试后使用
4. **点击"连接币安"**

连接成功后，系统会自动：
- 获取USDT本位合约列表
- 显示账户余额
- 显示当前持仓

### 第二步：选择监控合约

1. **选择合约**
   - 系统默认选择主流币（BTC、ETH等）
   - 可以勾选/取消其他合约
   - 建议选择3-5个高流动性合约

2. **查看实时价格**
   - 开始监控后实时更新
   - 显示涨跌幅
   - 已有持仓的合约会显示蓝色边框

### 第三步：配置交易参数

#### 交易参数
| 参数 | 说明 | 推荐值 |
|------|------|--------|
| 单笔仓位比例 | 每次交易占可用资金的百分比 | 5%-10% |
| 最大持仓数量 | 同时持有的最大合约数量 | 3-5 |
| 止损比例 | 自动止损的价格百分比 | 0.3%-0.6% |
| 止盈比例 | 自动止盈的价格百分比 | 1.0%-2.0% |
| 每日最大亏损 | 每日累计亏损上限 | 3%-5% |
| 每日交易限制 | 每日最大交易次数 | 10-20 |

#### 策略参数
| 参数 | 说明 | 推荐值 |
|------|------|--------|
| EMA短期 | 短期指数移动平均周期 | 20 |
| EMA长期 | 长期指数移动平均周期 | 60 |
| 最小趋势距离 | 避免震荡市的距离阈值 | 0.15% |

### 第四步：开始监控

1. **点击"开始监控"**
   - 系统开始接收实时行情
   - 每5秒刷新账户信息
   - 实时计算交易信号

2. **监控状态面板**
   - 显示今日交易次数
   - 显示当前持仓数量
   - 显示自动交易状态
   - 显示运行时间

### 第五步：启动自动交易

⚠️ **首次使用必须先在测试模式下验证！**

#### 测试模式（推荐）

1. **勾选"模拟交易"**
   - 系统不会真实下单
   - 只记录交易信号
   - 用于验证策略

2. **勾选"自动交易"**
   - 满足条件时自动执行
   - 查看交易记录

3. **观察运行**
   - 观察信号频率
   - 观察盈亏情况
   - 调整参数优化

#### 实盘模式（谨慎）

1. **取消"模拟交易"**
   - 系统会弹出警告
   - 确认后进入实盘模式

2. **开始小额测试**
   - 从小仓位开始
   - 观察实际表现
   - 逐步增加仓位

3. **持续监控**
   - 随时关注交易情况
   - 定期检查持仓
   - 遇到异常立即停止

---

## 界面说明

### 1. 账户信息面板

```
┌─────────────────────────────┐
│  账户信息        [刷新]      │
├─────────────────────────────┤
│  可用余额: 1000.00 USDT     │
│  钱包余额: 1050.00 USDT     │
│  未实现盈亏: +50.00 USDT    │
│  持仓数量: 2                │
└─────────────────────────────┘
```

### 2. 持仓表格

| 合约 | 方向 | 数量 | 入场价 | 标记价 | 未实现盈亏 | 杠杆 |
|------|------|------|--------|--------|-----------|------|
| BTCUSDT | 做多 | 0.5 | 50000 | 50100 | +50.00 | 3x |

### 3. 实时信号卡片

```
┌─────────────────────────────────────┐
│ [做多] BTCUSDT          50100.00    │
│ 12/30 15:30                        │
│ EMA20 > EMA60, 价格站上均线         │
│ 置信度: ████████░░ 75%             │
└─────────────────────────────────────┘
```

### 4. 交易记录

| 时间 | 合约 | 方向 | 类型 | 数量 | 价格 | 状态 |
|------|------|------|------|------|------|------|
| 12/30 15:30 | BTCUSDT | 买入 | MARKET | 0.5 | 50100.00 | 已成交 |

---

## 策略详解

### 趋势判断（15分钟）

**做多条件：**
1. EMA20 > EMA60（上升趋势）
2. 收盘价 > EMA20（价格在均线上方）
3. 最近3根K线未跌破EMA60（趋势稳定）
4. 当前成交量 ≥ 20均量（有成交量配合）

**做空条件：**
1. EMA20 < EMA60（下降趋势）
2. 收盘价 < EMA20（价格在均线下方）
3. 最近3根K线未突破EMA60（趋势稳定）
4. 当前成交量 ≥ 20均量（有成交量配合）

**震荡过滤：**
- EMA20与EMA60距离 < 0.15% → 不交易

### 进场时机（5分钟）

做多信号后，等待：
1. 价格回踩EMA20或EMA60
2. 回调时成交量递减（缩量回调）
3. RSI从低位回升 或 出现阳线吞没
4. 收盘价重新站上EMA20 → **进场**

做空信号后，等待：
1. 价格反弹EMA20或EMA60
2. 反弹时成交量递减
3. RSI从高位回落 或 出现阴线吞没
4. 收盘价重新跌破EMA20 → **进场**

### 止损止盈

**自动止损：**
- 做多：入场价 × (1 - 止损比例%)
- 做空：入场价 × (1 + 止损比例%)

**自动止盈：**
- 做多：入场价 × (1 + 止盈比例%)
- 做空：入场价 × (1 - 止盈比例%)

---

## 风险管理

### 资金管理
- **单笔风险**：不超过可用资金的5%
- **总风险**：每日不超过总资金的3%
- **仓位控制**：最多同时持有3-5个合约

### 交易限制
- **频率限制**：避免过度交易
- **亏损保护**：达到每日最大亏损自动停止
- **持仓监控**：实时查看未实现盈亏

### 紧急停止
发现以下情况立即停止：
- 网络连接不稳定
- 币安API异常
- 策略表现异常
- 达到每日最大亏损

---

## 常见问题

### Q1: 为什么连接失败？
**A:** 检查以下几点：
- API Key和Secret是否正确
- 是否启用了期货交易权限
- IP白名单是否设置
- 网络连接是否正常

### Q2: 测试网如何获取？
**A:** 访问 https://testnet.binancefuture.com/ 注册测试账号，系统会赠送测试USDT。

### Q3: 如何知道策略是否有效？
**A:** 建议流程：
1. 在"策略回测"标签页使用历史数据回测
2. 在测试网模式下运行至少1周
3. 观察信号频率和盈亏比
4. 确认稳定后再考虑实盘

### Q4: 可以同时监控多个合约吗？
**A:** 可以，但建议：
- 选择3-5个高流动性合约
- 避免选择走势过于相似的合约
- 合理分配资金

### Q5: 如何停止自动交易？
**A:** 有3种方式：
- 取消勾选"自动交易"（停止自动下单）
- 点击"停止监控"（完全停止）
- 关闭浏览器页面

### Q6: API密钥安全吗？
**A:** 安全措施：
- API密钥存储在浏览器本地
- 不发送到外部服务器
- 建议定期更换
- 设置IP白名单
- 不要开启提币权限

### Q7: 为什么没有交易信号？
**A:** 可能原因：
- 市场处于震荡状态（EMA距离<0.15%）
- 成交量不足
- 未满足所有进场条件
- 可以尝试调整参数

---

## 高级技巧

### 1. 参数优化
- 使用回测工具寻找最佳参数
- 不同市场可能需要不同参数
- 定期重新评估策略

### 2. 合约选择
- 选择高流动性合约（BTC、ETH等）
- 避免选择波动过大的合约
- 考虑相关性，避免重复

### 3. 时间管理
- 观察最佳交易时间段
- 避免重大新闻发布时交易
- 亚洲/欧洲/美洲时段特点不同

### 4. 监控频率
- 正常行情：每15分钟检查一次
- 重要时刻：实时盯盘
- 异常行情：考虑暂停交易

---

## 安全警告

⚠️ **重要声明**：

1. 本系统仅供学习和研究使用
2. 数字货币交易存在高风险
3. 可能导致全部资金损失
4. 使用本系统的所有后果由使用者承担
5. 策略历史表现不代表未来收益
6. 请在充分了解风险的前提下谨慎使用
7. 建议先在测试网充分验证
8. 不要投入超过承受能力的资金

---

## 技术支持

### 问题反馈
遇到问题请提供：
- 截图或错误信息
- 操作步骤描述
- 浏览器和版本信息

### 更新日志
- 添加账户余额查询
- 增强交易参数配置
- 实现实时持仓监控
- 优化信号检测逻辑

---

## 免责声明

本系统仅供技术学习和研究使用，不构成任何投资建议。加密货币市场波动极大，投资者可能面临全部本金损失的风险。使用本系统进行交易的所有后果和风险由使用者自行承担。策略的历史表现不保证未来收益，市场环境变化可能导致策略失效。请在充分了解相关风险的前提下谨慎使用本系统。

---

## 附录

### 币安相关链接
- 官网：https://www.binance.com/
- 期货：https://www.binance.com/zh-CN/futures
- API文档：https://binance-docs.github.io/apidocs/futures/cn/
- 测试网：https://testnet.binancefuture.com/

### 技术栈
- 前端：Next.js 16 + React 19 + TypeScript 5
- UI：Tailwind CSS 4
- 图表：Lightweight Charts
- API：Binance Futures API + WebSocket

---

祝交易顺利！📈
